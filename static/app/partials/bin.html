<div class="container-fluid">
  <div class="sidebar">
    <div class="panel request-toggle"
      ng-if="!isEmpty(history)"
      ng-init="open = false"
      ng-repeat="item in history | reverse"
      ng-class="{open: open}">
      <div class="panel-heading" ng-class="{open: open, fadein: isNewReq(item.timestamp)}">
        <span class="detail-toggle" ng-click="open = !open">{{item.timestamp | prettyDate}}</span>
        <span class="pull-right badge geo-toggle"
          ng-if="isArray(item.geo)"
          ng-init="geoActive = true"
          ng-class="{'badge-success':geoActive}"
          ng-click="toggleGeo(item); geoActive = !geoActive;">{{item.geo | arrLength}}</span>
        <span class="pull-right badge"
          ng-if="!isArray(item.geo)">{{item.geo | arrLength}}</span>
      </div>

      <ul ng-if="open" class="list-group">
        <div ng-repeat="(k, v) in item.headers" class="list-group-item">
          {{k}}: {{v}}
        </div>
      </ul>

      <ul ng-if="open" class="list-group">
        <li class="list-group-item">
          <p>body</p>
          <pre>{{item.body | prettyJson}}</pre>
        </li>
      </ul>

      <ul ng-if="open && item.geo" class="list-group">
        <li class="list-group-item">
          <p>geo</p>
          <pre>{{item.geo | prettyJson}}</pre>
        </li>
      </ul>
    </div>

    <div class="panel"
      ng-if="isEmpty(history)">
      <div class="panel-heading">
        <h4>No History Yet</h4>
        <p>Try sending a request!</p>
      </div>

      <ul class="list-group">
        <li class="list-group-item">
          <p>Example using <a href="http://en.wikipedia.org/wiki/CURL">cURL</a>:</p>
          <pre>curl -X POST \
-H "Content-Type: application/json" \
-d '{"lat":34,"lng":-120,"rad":9000}' \
{{host}}/{{binId}}</pre>
        </li>
      </ul>
    </div>
  </div>
  <div class="bin-map">
    <bin-map id="map" center="45.521699,-122.677386" zoom="10" onclick="click"></bin-map>
  </div>
</div>
